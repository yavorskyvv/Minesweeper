<button
  class="minesweeper-cell"
  type="button"
  appCellAnimation
  [delayMs]="delayMs()"
  [isGameWon]="isGameWon()"
  [row]="state().row"
  [column]="state().column"
  [gridWidth]="gridWidth()"
  [gridHeight]="gridHeight()"
  [attr.id]="'cell-' + state().row + '-' + state().column"
  [attr.tabindex]="tabIndex()"
  [attr.aria-rowindex]="state().row + 1"
  [attr.aria-colindex]="state().column + 1"
  [class.flagged]="!state().isRevealed && !isGameOver() && state().isFlagged"
  [class.revealed]="state().isRevealed || isGameOver()"
  [class.mine]="isGameOver() && state().isMine"
  [class.game-won]="isGameWon()"
  (click)="cellClick.emit()"
  (contextmenu)="$event.preventDefault(); cellFlag.emit()"
  (focus)="cellFocus.emit()"
  (keydown)="cellKey.emit($event)"
  [attr.aria-label]="ariaLabel()"
>
  @if (isGameOver() && state().isMine) {
    <span class="ms-icon ms-icon--mine ms-appear" aria-hidden="true">explosion</span>
  } @else if (state().isRevealed && state().adjacentMines) {
    <span class="ms-number ms-appear">{{ state().adjacentMines }}</span>
  } @else if (state().isFlagged) {
    <span class="ms-icon ms-icon--flag ms-appear" aria-hidden="true">flag</span>
  }
</button>
